var xhs=function(){"use strict";var se=Object.defineProperty;var oe=(y,g,v)=>g in y?se(y,g,{enumerable:!0,configurable:!0,writable:!0,value:v}):y[g]=v;var z=(y,g,v)=>oe(y,typeof g!="symbol"?g+"":g,v);function y(e){return e==null||typeof e=="function"?{main:e}:e}const g=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),v=new Map(g);class O extends Error{constructor(r){super(O._prepareSuperMessage(r));z(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const F=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],M=new WeakSet,q=e=>{M.add(e);const n=e.toJSON();return M.delete(e),n},j=e=>v.get(e)??Error,P=({from:e,seen:n,to:r,forceEnumerable:s,maxDepth:d,depth:p,useToJSON:i,serialize:l})=>{if(!r)if(Array.isArray(e))r=[];else if(!l&&x(e)){const t=j(e.name);r=new t}else r={};if(n.push(e),p>=d)return r;if(i&&typeof e.toJSON=="function"&&!M.has(e))return q(e);const a=t=>P({from:t,seen:[...n],forceEnumerable:s,maxDepth:d,depth:p,useToJSON:i,serialize:l});for(const[t,o]of Object.entries(e)){if(o&&o instanceof Uint8Array&&o.constructor.name==="Buffer"){r[t]="[object Buffer]";continue}if(o!==null&&typeof o=="object"&&typeof o.pipe=="function"){r[t]="[object Stream]";continue}if(typeof o!="function"){if(!o||typeof o!="object"){try{r[t]=o}catch{}continue}if(!n.includes(e[t])){p++,r[t]=a(e[t]);continue}r[t]="[Circular]"}}for(const{property:t,enumerable:o}of F)typeof e[t]<"u"&&e[t]!==null&&Object.defineProperty(r,t,{value:x(e[t])?a(e[t]):e[t],enumerable:s?!0:o,configurable:!0,writable:!0});return r};function W(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:s=!0}=n;return typeof e=="object"&&e!==null?P({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:s,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function X(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=n;if(e instanceof Error)return e;if(Y(e)){const s=j(e.name);return P({from:e,seen:[],to:new s,maxDepth:r,depth:0,serialize:!1})}return new O(e)}function x(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Y(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var G=Object.defineProperty,H=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,C=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,$=(e,n,r)=>n in e?G(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,L=(e,n)=>{for(var r in n||(n={}))C.call(n,r)&&$(e,r,n[r]);if(I)for(var r of I(n))V.call(n,r)&&$(e,r,n[r]);return e},N=(e,n)=>H(e,Q(n)),Z=(e,n)=>{var r={};for(var s in e)C.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&I)for(var s of I(e))n.indexOf(s)<0&&V.call(e,s)&&(r[s]=e[s]);return r},U=(e,n,r)=>new Promise((s,d)=>{var p=a=>{try{l(r.next(a))}catch(t){d(t)}},i=a=>{try{l(r.throw(a))}catch(t){d(t)}},l=a=>a.done?s(a.value):Promise.resolve(a.value).then(p,i);l((r=r.apply(e,n)).next())});function K(e){let n,r={};function s(){Object.entries(r).length===0&&(n==null||n(),n=void 0)}let d=Math.floor(Math.random()*1e4);function p(){return d++}return{sendMessage(i,l,...a){return U(this,null,function*(){var t,o,u,_;const E={id:p(),type:i,data:l,timestamp:Date.now()},m=(o=yield(t=e.verifyMessageData)==null?void 0:t.call(e,E))!=null?o:E;(u=e.logger)==null||u.debug(`[messaging] sendMessage {id=${m.id}} ─ᐅ`,m,...a);const b=yield e.sendMessage(m,...a),{res:c,err:f}=b??{err:new Error("No response")};if((_=e.logger)==null||_.debug(`[messaging] sendMessage {id=${m.id}} ᐊ─`,{res:c,err:f}),f!=null)throw X(f);return c})},onMessage(i,l){var a,t,o;if(n==null&&((a=e.logger)==null||a.debug(`[messaging] "${i}" initialized the message listener for this context`),n=e.addRootListener(u=>{var _,E;if(typeof u.type!="string"||typeof u.timestamp!="number"){if(e.breakError)return;const c=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(u)}`);throw(_=e.logger)==null||_.error(c),c}(E=e==null?void 0:e.logger)==null||E.debug("[messaging] Received message",u);const m=r[u.type];if(m==null)return;const b=m(u);return Promise.resolve(b).then(c=>{var f,B;return(B=(f=e.verifyMessageData)==null?void 0:f.call(e,c))!=null?B:c}).then(c=>{var f;return(f=e==null?void 0:e.logger)==null||f.debug(`[messaging] onMessage {id=${u.id}} ─ᐅ`,{res:c}),{res:c}}).catch(c=>{var f;return(f=e==null?void 0:e.logger)==null||f.debug(`[messaging] onMessage {id=${u.id}} ─ᐅ`,{err:c}),{err:W(c)}})})),r[i]!=null){const u=Error(`[messaging] In this JS context, only one listener can be setup for ${i}`);throw(t=e.logger)==null||t.error(u),u}return r[i]=l,(o=e.logger)==null||o.log(`[messaging] Added listener for ${i}`),()=>{delete r[i],s()}},removeAllListeners(){Object.keys(r).forEach(i=>{delete r[i]}),s()}}}for(var w=256,J=[],R=256,S;w--;)J[w]=(w+256).toString(16).substring(1);function ee(e){var n=0,r=11;if(!S||w+r>R*2)for(S="",w=0;n<R;n++)S+=J[Math.random()*256|0];return S.substring(w,w+++r)}function k(e,n={targetScope:window??void 0}){return typeof cloneInto<"u"?cloneInto(e,n.targetScope):e}var A="@webext-core/messaging/custom-events",D="@webext-core/messaging/custom-events/response";function re(e){const n=e.namespace,r=ee(),s=[],d=i=>new Promise(l=>{const a=t=>{const{detail:o}=t;o.namespace===n&&o.instanceId!==r&&o.message.type===i.detail.message.type&&l(o.response)};s.push(()=>window.removeEventListener(D,a)),window.addEventListener(D,a),window.dispatchEvent(i)}),p=K(N(L({},e),{sendMessage(i){const l={message:i,namespace:n,instanceId:r},a=new CustomEvent(A,{detail:k(l)});return d(a)},addRootListener(i){const l=a=>U(this,null,function*(){const t=a,{detail:o}=t,u=Z(t,["detail"]);if(o.namespace!==n||o.instanceId===r)return;const _=N(L({},o.message),{event:u}),m={response:yield i(_),message:_,instanceId:r,namespace:n},b=new CustomEvent(D,{detail:k(m)});window.dispatchEvent(b)});return window.addEventListener(A,l),()=>window.removeEventListener(A,l)},verifyMessageData(i){return structuredClone(i)}}));return N(L({},p),{removeAllListeners(){p.removeAllListeners(),s.forEach(i=>i())}})}const{sendMessage:ie,onMessage:h}=re({namespace:"social-media-copilot-chrome"}),ne=y(()=>{h("getUserPageData",()=>window.__INITIAL_STATE__.user.userPageData._rawValue),h("getNoteDetail",async({data:e})=>window.__INITIAL_STATE__.note.noteDetailMap[e]),h("getLoginUserInfo",()=>window.__INITIAL_STATE__.user.userInfo._rawValue),h("webmsxyw",async({data:e})=>window._webmsxyw(e.path,e.body)),h("getCurrentSearchData",()=>{var n,r,s,d;const e=window.__INITIAL_STATE__.search;return{feeds:(r=(n=e==null?void 0:e.feeds)==null?void 0:n._rawValue)==null?void 0:r.filter(p=>p.modelType==="note"),currentSearchType:(s=e==null?void 0:e.currentSearchType)==null?void 0:s._rawValue,userLists:(d=e==null?void 0:e.userLists)==null?void 0:d._rawValue}})});function ae(){}function T(e,...n){}const te={debug:(...e)=>T(console.debug,...e),log:(...e)=>T(console.log,...e),warn:(...e)=>T(console.warn,...e),error:(...e)=>T(console.error,...e)};return(async()=>{try{return await ne.main()}catch(e){throw te.error('The unlisted script "xhs" crashed on startup!',e),e}})()}();
xhs;
